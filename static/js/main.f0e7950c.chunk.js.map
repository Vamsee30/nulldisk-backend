{"version":3,"sources":["hooks/useApi.tsx","Vim.tsx","Main.tsx","reportWebVitals.ts","index.tsx"],"names":["useApi","props","payload","useState","accessKey","setAccessKey","createPersistedState","useRefreshKeyState","refreshKey","setRefreshKey","refreshKeyIsValid","setRefreshKeyIsValid","apiUrl","accessKeyIsValid","setAccessKeyIsValid","go","useCallback","callback","body","method","path","console","log","options","headers","JSON","stringify","fetch","then","response","status","json","useEffect","access","username","password","fail","refresh","require","Vim","codeInput","React","createRef","editor","insert","text","doc","getDoc","cursor","getCursor","replaceRange","flush","setValue","insert_image","line","src","width","element","document","createElement","addLineWidget","above","noHScroll","reload_images","pattern","lines","state","content","split","active_widgets","widgets","map","x","widget","clear","i","length","match","exec","image","title","parseInt","url","push","setState","vimrc","CodeMirror","mapCommand","context","image_reload","image_disable","quit","wquit","save","commands","changesCallback","writeStatus","lastSig","md5","statusBars","className","commandDisplay","vimMode","render","statusBar","id","name","ref","currentSig","defaultMsg","this","current","fromTextArea","mode","keyMap","theme","lineNumbers","showCursorWhenSelecting","lineWrapping","keys","on","edit","data","getValue","sig","key","e","Component","defaultProps","dateFormat","Modal","setAppElement","Main","postId","updatePostId","updateContent","auth","updateAuth","authModalIsOpen","setAuthModal","setUsername","setPassword","searchPanelIsOpen","setSearchPanelIsOpen","query","setQuery","results","setResults","previewId","setPreviewId","newChanges","setNewChanges","safeChangeCallback","setSafeChangeCallback","dialogChangesIsOpen","setDialogChangesIsOpen","IoLinksIsOpen","setIoLinksIsOpen","incomingLinks","setIncomingLinks","outgoingLinks","setOutgoingLinks","primary","when","date","order_by","sort","searchFilters","setSearchFilters","vimRef","useRef","opts","defaultPayload","loginAction","setPayload","res","safeClose","openDocument","getOutLinks","executeQuery","parsed_results","date_created","Date","date_updated","_setResults","resultRows","row","selectedPreview","onClick","result","Content","pl","PayLoad","override","isOpen","onRequestClose","overlayClassName","onSubmit","preventDefault","onChange","target","value","type","action","autoComplete","autoFocus","filter","itext","some","fresults","a","b","getTime","filteredResults","prev","object","style","color","fontWeight","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f0e7950c.chunk.js","sourcesContent":["import {useState, useEffect, useCallback} from 'react'\nimport createPersistedState from 'use-persisted-state'\n\nexport interface IProps {\n    username:string,\n    password:string,\n    fail: ()=>void\n}\n\nexport interface IPayload {\n    path:string,\n    method:string,\n    body:{}|null,\n    callback: (result:any)=>any,\n}\n\nfunction useApi(props:IProps, payload:IPayload){\n\n    const [accessKey, setAccessKey] = useState('')\n    const useRefreshKeyState = createPersistedState('refreshKey')\n    const [refreshKey, setRefreshKey] = useRefreshKeyState('')\n    //const [refreshKey, setRefreshKey] = useState('')\n    const [refreshKeyIsValid, setRefreshKeyIsValid] = useState<null|boolean>(null)\n    // const apiUrl = 'http://127.0.0.1:8000/api/'\n    const apiUrl = '/api/'\n    const [accessKeyIsValid, setAccessKeyIsValid] = useState<null|boolean>(null)\n\n    \n    const go = useCallback((accessKey)=>{\n        const {body, method, path} = payload\n        console.log('executing GO:'+accessKey)\n        if(method === 'logout'){\n            return logout(payload.callback)\n        }\n        const options = {\n            method: method,\n            headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer '+accessKey,\n            },\n            ... (body !== null) && { body: JSON.stringify(body) }\n        }\n        fetch(apiUrl+path,options)\n        .then(response=>{\n            if(response.status===401||response.status===400){\n                setAccessKeyIsValid(false)\n            } else {\n                setAccessKeyIsValid(true)\n                response.json()\n                .then(response=>{\n                    payload.callback(response)\n                })\n            }\n        })\n    },[payload])\n\n    function logout(callback:(response:null)=>void){\n        setRefreshKey('')\n        setAccessKey('')\n        setRefreshKeyIsValid(null)\n        setAccessKeyIsValid(null)\n        callback(null)\n    }\n\n    useEffect(()=>{\n        if(accessKeyIsValid===false){\n            console.log('access key is false')\n            // We tried to make a request, but our key is invalid.\n            // We need to use the refresh key\n            const options = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', },\n                body: JSON.stringify( {'refresh': refreshKey} ),\n            }\n            fetch(apiUrl+'token/refresh/', options)\n            .then(response=>{\n                if(response.status !== 200 ){\n                    setRefreshKeyIsValid(false)\n                    // this needs to trigger a login event\n                } else {\n                    response.json()\n                    .then(response=>{\n                        setRefreshKeyIsValid(true)\n                        setAccessKey(response.access)\n                        // setAccessKeyIsValid(true)\n                    })\n                }\n            })\n        }\n    },[accessKeyIsValid])\n\n\n    useEffect(()=>{\n        console.log('responding to change in access key:'+accessKey)\n        go(accessKey)\n    },[accessKey,payload])\n\n    useEffect(()=>{\n        if(refreshKeyIsValid===false){\n            // even after trying to login, the RK is invalid\n            // We must straight up log in.\n            const options = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    username: props.username,\n                    password: props.password,\n                 })\n            }\n            fetch(apiUrl+'token/', options)\n            .then(response=>{\n                console.log(response.status)\n                if(response.status === 401 || response.status ===400){\n                    setAccessKeyIsValid(null)\n                    setRefreshKeyIsValid(null)\n                    props.fail()\n                    console.log('total fail')\n                }\n                else { \n                    console.log('login works')\n                    response.json()\n                    .then(response=>{\n                        setAccessKey(response.access)\n                        setRefreshKey(response.refresh)\n                        // setRefreshKeyIsValid(true)\n                        // setAccessKeyIsValid(true) // Commenting this out disables the loop\n                    })\n                }\n            })\n        }\n\n        \n    },[refreshKeyIsValid])\n\n};\n\nexport default useApi\n","import React, {useImperativeHandle} from 'react';\nimport './index.css';\nimport './Vim.css';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/the-matrix.css';\nimport 'codemirror/addon/dialog/dialog.css';\nimport CodeMirror from 'codemirror';\nimport md5 from 'md5';\n//import CodeMirror from '@jkvim/react-codemirror2'\n//require('codemirror/lib/codemirror.js');\nrequire('codemirror/mode/markdown/markdown.js');\nrequire('codemirror/mode/javascript/javascript');\nrequire('codemirror/keymap/vim.js');\nrequire('codemirror/addon/dialog/dialog.js');\nrequire('codemirror/addon/search/searchcursor.js');\nrequire('codemirror/mode/clike/clike.js');\nrequire('codemirror/addon/edit/matchbrackets.js');\n\ninterface IProps{\n  content: string,\n  defaultMsg: string,\n  writeStatus: string,\n  save: (content:string,callback:()=>void)=>void;\n  quit: (override:boolean)=>void;\n  changesCallback: (x:boolean)=>void; // lets parent know when changes have been made\n  ref: React.MutableRefObject<Vim|null>,\n}\ninterface IState{\n  content: string,\n  currentSig: string,\n  lastSig: string,\n  writeStatus: string,\n  commandDisplay: string,\n  vimMode: string,\n  widgets: Array<IWidget>,\n}\n\ninterface IWidget {\n  title: string,\n  width: number|null,\n  url: string,\n  line: number,\n  widget: null|any,\n}\n\n\nclass Vim extends React.Component<IProps, IState> {\n\n  private codeInput = React.createRef<HTMLTextAreaElement>();\n  private editor:CodeMirror.Editor|null;\n  \n  static defaultProps = {\n    content: '',\n    defaultMsg: '93',\n    writeStatus: 'File written to database!',\n    save: (content:string)=>{},\n    changesCallback: (x:boolean)=>{},\n  }\n\n  constructor(props: IProps){\n    super(props);\n    this.state = {\n      content: this.props.content,\n      currentSig: '',\n      lastSig: '',\n      writeStatus: this.props.defaultMsg,\n      commandDisplay: '',\n      vimMode: 'normal',\n      widgets: [],\n    }\n    this.editor = null;\n    this.vimrc();\n  }\n\n  componentDidMount(){\n\n    if(this.codeInput.current){\n\n      this.editor = CodeMirror.fromTextArea(this.codeInput.current,{mode:'markdown', keyMap:'vim',theme:'the-matrix', lineNumbers:true, showCursorWhenSelecting: true, lineWrapping:true});\n      var keys = '';\n      this.editor.getDoc().setValue(this.props.content)\n      this.editor.on(\"change\",(edit)=>{\n        const data = edit.getValue()\n        const sig = md5(data)\n        this.setState({\n          content:data,\n          currentSig: sig\n        });\n        if(this.state.lastSig !== sig){\n          this.setState({writeStatus:'Unsaved changes...'})\n          this.props.changesCallback(true)\n        }\n      });\n\n      CodeMirror.on(this.editor, 'vim-keypress', (key:string)=>{\n        keys = keys + key;\n        this.setState({commandDisplay:keys})\n      });\n\n      CodeMirror.on(this.editor, 'vim-command-done', (e:any)=> {\n        keys = '';\n        this.setState({commandDisplay:keys})\n      });\n\n      CodeMirror.on(this.editor, 'vim-mode-change', (e:any)=> {\n        this.setState({vimMode:e.mode})\n      });\n    \n    }\n\n  }\n\n  insert = (text:string) => {\n    if(this.editor){\n      var doc = this.editor.getDoc()\n      var cursor = doc.getCursor()\n      doc.replaceRange(text,cursor)\n    }\n  }\n\n\n  flush = (text:string) => {\n    if(this.editor){\n      var doc = this.editor.getDoc()\n      doc.setValue(text)\n    }\n  }\n\n  insert_image = (line:number,src:string,width:null|number) => {\n    if(this.editor){\n      var doc = this.editor.getDoc()\n      const element = document.createElement('img')\n      element.src= src\n      console.log(width)\n      if(width){\n        element.width=width\n      }\n      return doc.addLineWidget(line, element,{above:false, noHScroll:true})\n    }\n  }\n\n  reload_images = () => {\n    var pattern = /!\\[(.*?)\\](\\[width=(\\d{1,})\\])?\\((.*)\\)/\n    var lines = this.state.content.split('\\n')\n    var active_widgets:Array<IWidget> = []\n    this.state.widgets.map(x=>x.widget.clear())\n    for(var i=0;i<lines.length; i++){\n      var match = pattern.exec(lines[i])\n      if(match){\n        var image = {\n          title: match[1],\n          width: (match[3]===null)?null:parseInt(match[3]),\n          url: match[4],\n          line: i+1,\n          widget: this.insert_image(i+1,match[4],(match[3]===null)?null:parseInt(match[3]))\n        }\n        console.log(image)\n        active_widgets.push(image)\n      }\n    }\n    this.setState({\n      widgets:active_widgets\n    })\n  }\n\n\n  vimrc = () =>{\n    CodeMirror.Vim.map('J', '5j', 'normal')\n    CodeMirror.Vim.map('K', '5k', 'normal')\n    CodeMirror.Vim.mapCommand('jk', 'action', 'exitInsertMode', {}, { context: 'insert' });\n\n    CodeMirror.Vim.mapCommand('U', 'action', 'redo', {}, { context: 'normal' });\n\n    CodeMirror.Vim.image_reload = ()=>{\n      this.reload_images()\n    }\n    CodeMirror.Vim.image_disable = () => {\n      this.state.widgets.map(x=>x.widget.clear())\n    }\n    CodeMirror.Vim.quit = () => {\n      this.props.quit(false)\n    }\n    CodeMirror.Vim.wquit = () => {\n      this.props.save(this.state.content,()=>this.props.quit(true))\n    }\n    CodeMirror.commands.save = ()=>{\n      this.props.save(this.state.content,()=>{})\n      this.props.changesCallback(false)\n      this.setState({\n        writeStatus:this.props.writeStatus,\n        lastSig: md5(this.state.content)\n      });\n    };\n  }\n  \n\n  statusBars = () => {\n    return (\n      <div className=\"statusBar_wrapper\">\n      <div className=\"statusBar_write\">{this.state.writeStatus}</div>\n        <div className=\"statusBar_buffer\">Key buffer: {this.state.commandDisplay}</div>\n        <div className=\"statusBar_mode\">Vim mode: { this.state.vimMode }</div>\n      </div>\n    )\n  }\n\n  render = () => {\n    const statusBar = this.statusBars()\n    return(\n      <div className=\"vim\">\n        <textarea id=\"code\" name=\"code\" className=\"code\" ref={this.codeInput} ></textarea>\n        {statusBar}\n      </div>\n    )\n  }\n}\n\nexport default Vim;\n","import React, {useState, useEffect, useRef, useLayoutEffect} from 'react';\nimport useApi, {IPayload} from './hooks/useApi';\nimport Modal from 'react-modal'\nimport Vim from './Vim';\nimport './Main.css';\nimport './modal.css';\nvar dateFormat = require(\"dateformat\");\nModal.setAppElement('#root')\n\ntype orderByDate = 'date_created'|'date_updated'\ntype sortType = 'DESC'|'ASC'\ninterface ISearchFilters {\n  primary: string,\n  when: string,\n  date: null|Date,\n  order_by: orderByDate,\n  sort: sortType,\n}\n\ninterface IResult {\n  id: number,\n  title: string,\n  content: string,\n  date_created: Date,\n  date_updated: Date,\n  author: number\n}\n\nfunction Main():JSX.Element { \n\n  const [postId,updatePostId] = useState<number|null>(null)\n  const [content, updateContent] = useState<string>('');\n  const [auth, updateAuth] = useState<boolean>(false)\n  const [authModalIsOpen, setAuthModal] = useState(false)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [vimKey, setVimKey] = useState(1)\n  const [searchPanelIsOpen, setSearchPanelIsOpen] = useState(false)\n  const [query, setQuery] = useState('')\n  const [results, setResults] = useState<null|Array<IResult>>(null)\n  const [previewId, setPreviewId] = useState<null|number>(null)\n  const [newChanges, setNewChanges] = useState(false)\n  const [safeChangeCallback, setSafeChangeCallback] = useState<null|(()=>void)>(null)\n  const [dialogChangesIsOpen, setDialogChangesIsOpen] = useState(false)\n  const [IoLinksIsOpen, setIoLinksIsOpen] = useState(false)\n  const [incomingLinks, setIncomingLinks] = useState<Array<IResult>>([])\n  const [outgoingLinks, setOutgoingLinks] = useState<Array<IResult>>([])\n  const [searchFilters, setSearchFilters] = useState<ISearchFilters>({\n    primary: 'date_created',\n    when: 'after',\n    date: null,\n    order_by: 'date_created',\n    sort: 'DESC'\n  })\n\n  const vimRef = useRef<Vim>(null)\n\n  const apiUrl = '/'\n\n  const opts = {\n    username: username,\n    password: password,\n    fail: forceLogin\n  }\n\n  const defaultPayload = {\n    path: 'notes/validateAuth/',\n      method: 'GET',\n      body: null,\n      callback: loginAction\n  }\n\n  const [payload, setPayload] = useState<IPayload>(defaultPayload)\n  useApi(opts, payload)\n\n\n  function loginAction(res:any){\n    updateAuth(true)\n    setAuthModal(false)\n    setUsername(res.auth)\n  }\n  function openAuthModal(){ setAuthModal(true) }\n  function closeAuthModal(){\n    if(auth){ setAuthModal(false) }\n  }\n\n  function _setResults(res:Array<any>){\n    var parsed_results:Array<IResult> = res.map(x=>({\n      ...x,\n      date_created: new Date(x.date_created),\n      date_updated: new Date(x.date_updated),\n    }))\n    return setResults(parsed_results)\n  }\n\n  function write(Content:string, callback:()=>void){\n    // This function is passed to vim for :w\n    // It must distinguish between a new file vs saving a new file\n    if(postId === null){\n      var pl = {\n        path: 'notes/',\n        method: 'POST',\n        body: {content: Content},\n      }\n    } else {\n      var pl = {\n        path: 'notes/'+postId+'/',\n        method: 'PUT',\n        body: {content: Content},\n      }\n    }\n    const PayLoad = {...pl, callback:(res:any)=>{\n      updatePostId(res.id)\n      getOutLinks()\n      setNewChanges(false)\n      // dev: try and extract the filename and print it on the status bar\n      callback()\n      console.log(res)\n    }}\n\n    setPayload(PayLoad)\n  }\n\n  function quit(override=false){\n\n    const PayLoad = {\n      path: '',\n      method: 'logout',\n      body: '',\n      callback:(res:null)=>{\n        updatePostId(null)\n        if(vimRef.current){\n          vimRef.current.flush('')\n        }\n        updateAuth(false)\n        setAuthModal(true)\n      }\n    }\n    if(override){\n      setPayload(PayLoad)\n    } else{\n      safeClose(()=>{\n        setPayload(PayLoad)\n      })\n    }\n  }\n\n\n  function safeClose(callback:()=>void){\n    if(newChanges === false){\n      callback()\n    } else {\n      setSafeChangeCallback(()=>()=>callback())\n    }\n  }\n\n  function newFile(){\n      safeClose(()=>{\n        updatePostId(null)\n        setIncomingLinks([])\n        setOutgoingLinks([])\n        if(vimRef.current){\n          vimRef.current.flush('')\n        }\n        setNewChanges(false)\n      })\n  }\n  \n  function openDocument(){\n    if(previewId){\n      // check for unsaved changes\n      setSearchPanelIsOpen(false)\n      setIoLinksIsOpen(false)\n      \n      safeClose(()=>{\n        updatePostId(previewId)\n        setPreviewId(null)\n      })\n    }\n  }\n\n\n  function insertDocument(){\n    if(results){\n      const result = results.filter(x=>x['id']==previewId)[0]\n      var itext = '['+result['title']+']'+'(VID='+result['id']+')'\n      if(vimRef.current){\n        vimRef.current.insert(itext)\n        setSearchPanelIsOpen(false)\n      }\n    }\n  }\n  function deleteDocument(){}\n\n  function forceLogin(){\n    setAuthModal(true)\n    updateAuth(false)\n  }\n  \n  function submitLogin(){\n    const payload = {\n      path:'notes/validateAuth/',\n      method: 'GET',\n      body: null,\n      callback: loginAction\n    }\n    setPayload(payload)\n  }\n\n  function getBacklinks(){\n    const payload = {\n      path: 'notes/'+postId+'/getBacklinks/',\n      method: 'GET',\n      body: null,\n      callback:(res:any)=>{\n        setIncomingLinks(res)\n      }\n    }\n    setPayload(payload)\n  }\n\n  function getOutLinks(){\n    console.log('getting outlinks')\n    const payload = {\n      path: 'notes/'+postId+'/getOutlinks/',\n      method: 'GET',\n      body: null,\n      callback:(res:any)=>{\n        console.log(res)\n        setOutgoingLinks(res)\n      }\n    }\n    setPayload(payload)\n  }\n\n  function executeQuery(){\n    const payload = {\n      path: 'notes/search/?query='+query,\n      method: 'GET',\n      body: null,\n      callback: (res:any)=>{\n        console.log(res)\n        _setResults(res)\n        // Todo handle null results\n      }\n    }\n    setPayload(payload)\n    setPreviewId(null)\n  }\n\n  useEffect(()=>{\n    if(auth && postId){\n      console.log('selected new post:'+postId)\n      // logged in & postId has changed...\n      const payload = {\n        path: 'notes/'+postId+'/',\n        method: 'GET',\n        body: null,\n        callback: (result:any)=> {\n          console.log('got a new result!')\n          updateContent(result.content)\n          getBacklinks()\n          getOutLinks()\n          setNewChanges(false)\n        }\n      }\n      setPayload(payload)\n      // getBacklinks()\n    }\n  },[postId])\n\n  useEffect(()=>{\n    // when content is updated, trigger reload by changing the VimKey\n    if(vimRef.current){\n      vimRef.current.flush(content)\n    }\n  },[content])\n\n  useEffect(()=>{\n    console.log(searchFilters)\n  },[searchFilters])\n\n  useEffect(()=>{\n    console.log('Safe Change Callback Set')\n    if(safeChangeCallback !== null){\n      setDialogChangesIsOpen(true)\n    }\n  },[safeChangeCallback])\n\n  function resultRows(data:Array<IResult>){\n    return(\n      <div>{data !== null &&\n        data.map(row=>{\n        var selectedPreview = row['id'] == previewId ? 'selectedRow':''\n        return (\n          <div className={'searchResult '+selectedPreview} onClick={()=>{\n            if(previewId==row['id']){\n              setPreviewId(null)\n            } else{\n              setPreviewId(row['id'])\n            }\n          }}>\n            <div className=\"searchResults_wrapper\">\n              <div className=\"searchResultTitle\">{row['title']}</div>\n              <div className=\"searchResultDate\">{dateFormat(row[searchFilters.order_by],'dd/mmm/yyyy')}</div>\n\n              </div>\n          </div>\n        )\n      })}</div> \n    )\n  }\n\n  function filteredResults(results:Array<IResult>){\n    var fresults = results.filter(x=>{\n      if(searchFilters.date!==null){\n        if(searchFilters.when==='before'){\n          return x[searchFilters.order_by] <= searchFilters.date\n        }\n        if(searchFilters.when==='after'){\n          return x[searchFilters.order_by] >= searchFilters.date\n        }\n      } else {\n        return true\n      }\n    })\n    fresults.sort((a,b)=>{\n      if(searchFilters.sort==='ASC'){\n        return a[searchFilters.order_by].getTime()-b[searchFilters.order_by].getTime()\n      } else {\n        return b[searchFilters.order_by].getTime()-a[searchFilters.order_by].getTime()\n      }\n    })\n    return fresults\n  }\n\n  return (\n    <div className='main'>\n      <Vim  content={content} save={write} quit={quit} ref={vimRef} changesCallback={setNewChanges}/>\n      <Modal\n        isOpen={authModalIsOpen}\n        onRequestClose={closeAuthModal}\n        className='SearchModal'\n        overlayClassName='SearchOverlay'\n        >\n        <div className=\"IoLinks_wrapper\">\n        <div className=\"IoLinks_incoming\">\n        \n        <form onSubmit={(e)=>{\n          e.preventDefault()\n          submitLogin()\n        }}>\n            <input name='username' className='greenput_narrow' onChange={(e)=>{\n              setUsername(e.target.value)\n            }}/><br />\n            <input type=\"password\" name='password' className='greenput_narrow' onChange={(e)=>{\n              setPassword(e.target.value)\n            }}/><br />\n            <button className='greenput_narrow' type=\"submit\">Login</button>\n          </form>\n        \n        </div>\n        <div className=\"IoLinks_outgoing\"><h1>NullDisk</h1><ul><li>Military Grade Encryption</li><li>Zettelkasten Schema</li><li>VIM Keybindings</li></ul></div>\n        </div>\n        </Modal> \n\n        <Modal\n        isOpen={searchPanelIsOpen}\n        onRequestClose={()=>setSearchPanelIsOpen(false)}\n        className='SearchModal'\n        overlayClassName='SearchOverlay'\n        >\n          <div className=\"searchBox\">\n            <form action=\"#\" autoComplete=\"off\" onSubmit={(e)=>{\n              e.preventDefault()\n              executeQuery()\n            }}>\n            <input className='greenput' name=\"query\" autoFocus onChange={(e)=>setQuery(e.target.value)}/>\n            <select className='greenput_narrow' onChange={(e)=>setSearchFilters({...searchFilters,primary:e.target.value})}>\n              <option value='date_created'>Created</option>\n              <option value=\"date_updated\">Updated</option>\n            </select>\n            <select className='greenput_narrow' onChange={(e)=>setSearchFilters({...searchFilters,when:e.target.value})}>\n              <option value=\"after\">After</option>\n              <option value=\"before\">Before</option>\n            </select>\n            <input className='greenput_narrow' type=\"date\" onChange={(e)=>setSearchFilters({...searchFilters,date:(e.target.value===''?null:new Date(e.target.value))})} />\n            &nbsp; :: &nbsp;\n            <select className='greenput_narrow' onChange={(e)=>setSearchFilters({...searchFilters,order_by:e.target.value as orderByDate})}>\n              <option value='date_created'>Created</option>\n              <option value=\"date_updated\">Updated</option>\n            </select>\n            <select className='greenput_narrow' onChange={(e)=>setSearchFilters({...searchFilters,sort:e.target.value as sortType})}>\n              <option value=\"DESC\">DESC</option>\n              <option value=\"ASC\">ASC</option>\n            </select>\n            </form>\n\n          {previewId !==null &&\n          <div className=\"searchButtonsWrapper\">\n            <div className=\"button_open button\" onClick={openDocument}>Open</div>\n            <div className=\"button_insert button\" onClick={insertDocument}>Insert</div>\n            <div className=\"button_delete button\" onClick={deleteDocument}>Delete</div>\n          </div>\n          }\n\n          <div className=\"searchResults\">\n          {results !==null && results.some(x=>x) &&\n            resultRows(filteredResults(results))\n          }\n          </div>\n          <div className=\"spacer\"></div>\n          <div className=\"searchPreview\"><pre>\n          {previewId !== null && results !==null &&\n            results.filter(x=>x['id']==previewId).map(prev=>prev['content']) \n          }\n          {previewId ===null && (<span>search for a document to preview it here</span>)}\n          </pre></div>\n          </div>\n        </Modal>\n\n        <Modal isOpen={ dialogChangesIsOpen } className=\"SearchModal\" overlayClassName=\"SearchOverlay\"><div className=\"alertBox\">\n          <span className=\"alertText\">Warning! You have unsaved changes.</span>\n          <div className=\"button\" onClick={()=>{\n            if(safeChangeCallback !==null){\n              safeChangeCallback()\n            }\n            setDialogChangesIsOpen(false)\n          }}>Override</div>\n          <div className=\"button\" onClick={()=>setDialogChangesIsOpen(false)}>Close</div>\n          </div></Modal>\n\n          <Modal isOpen={IoLinksIsOpen} className=\"SearchModal\" overlayClassName=\"SearchOverlay\" onRequestClose={()=>setIoLinksIsOpen(false)}>\n        <div className=\"IoLinks_wrapper\">\n        <div className=\"IoLinks_incoming\"><span className=\"title\">Incoming Links</span>\n            {incomingLinks !==null && \n            resultRows(incomingLinks)}\n          </div>\n          <div className=\"IoLinks_outgoing\"><span className=\"title\">Outgoing Links</span>\n            {outgoingLinks !==null &&\n            resultRows(outgoingLinks)}\n          </div>\n          {(previewId && incomingLinks !==null && outgoingLinks !==null) && (incomingLinks.filter(x=>x['id']==previewId).length>0 || outgoingLinks.filter(x=>x['id']==previewId).length>0) &&\n            <div className=\"button\" onClick={openDocument}>Open</div>\n          }\n          <div className=\"IoLinks_preview\">\n            <pre>\n              {previewId && incomingLinks &&\n                incomingLinks.filter(object=>object['id']==previewId).map(res=>res['content'])\n              }\n              {previewId && outgoingLinks &&\n                outgoingLinks.filter(object=>object['id']==previewId).map(res=>res['content'])\n              }\n            </pre>\n          </div>\n        </div>\n        </Modal>\n\n          <div className=\"main_buttons_wrapper\">\n            <div className=\"button\" onClick={()=>setSearchPanelIsOpen(true)}>Explorer</div>\n            <div className=\"button\" onClick={()=>newFile()}>New File</div>\n            <div className=\"button\" onClick={()=>setIoLinksIsOpen(true)}><span style={(incomingLinks.length>0||outgoingLinks.length>0) ? ({color:'red', fontWeight:'bold'}) : ({}) }>Connections { incomingLinks.length}/{outgoingLinks.length}</span></div>\n          </div>\n    </div>\n  )\n}\n\nexport default Main\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport reportWebVitals from './reportWebVitals';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Main />\n  </React.StrictMode>,\n\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}